{% load image_tags pageurl %}

{% if news_items %}
    <section class="carousel-news row module">
        {% comment %}
        TODO: add link to news index
        {% endcomment %}
        <h2 class="module-title"><a href="#">News</a></h2>
        <ul class="carousel-content">
            {% for news_item in news_items %}
                <li class="{% if forloop.counter == 1 %}active{% endif %}{% if forloop.last %} last{% endif %}">
                    <a href="{% pageurl news_item %}">
                        {% with news_item.feed_image as feed_image %}
                            {% if feed_image %}
                                <div class="image">{% image feed_image width-700 %}</div>
                            {% else%}
                                {% comment %}Default image to appear here{% endcomment %}
                            {% endif %}
                        {% endwith %}
                        <div class="caption">
                            <h3 class="h6">{{ news_item.title }}</h3>
                        </div>
                    </a>
                </li> 
            {% endfor %}
        </ul>
    </section>
{% endif %}